<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>stasera qui</title>
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="assets/style.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
<style>
/* Patch: forza il calendario sopra la mappa anche con vecchie CSS */
.map{position:relative; z-index:1}
.modal{z-index:999999 !important}
.modal.open{display:flex !important}
</style>
</head>
<body>
<header class="header">
  <div class="logo">
    <svg class="pin" viewBox="0 0 64 72" aria-hidden="true">
      <path d="M32 0c13.255 0 24 10.745 24 24 0 17.5-24 40-24 40S8 41.5 8 24C8 10.745 18.745 0 32 0z" fill="#22b3f0"/>
      <circle cx="32" cy="24" r="9" fill="#ffffff"/>
    </svg>
    <span class="wordmark">stasera qui</span>
  </div>
</header>
<main class="container">
  <div class="claim"><b>Scopri cosa fare, dove vuoi, quando vuoi</b></div>
  <nav class="top-tabs">
    <a href="mission.html">Mission</a>
    <a href="chi-siamo.html">Chi siamo</a>
    <a href="contatti.html">Contatti</a>
    <a href="come-funziona.html">Come funziona</a>
  </nav>

  <div class="search"><input placeholder="Cerca città, zona o evento… (facoltativo)" id="searchInput"></div>

  <div class="pills" id="dayPills">
    <div class="pill" data-day="oggi">Oggi</div>
    <div class="pill" data-day="domani">Domani</div>
    <div class="pill" data-day="weekend">Weekend</div>
    <div class="pill" id="selData">Seleziona data <span class="date-badge" style="display:none"></span></div>
  </div>

  <div class="chips" id="chips">
    <div class="chip" data-cat="Musica">Musica</div>
    <div class="chip" data-cat="Food & Drink">Food & Drink</div>
    <div class="chip" data-cat="Sagre & Fiere">Sagre & Fiere</div>
    <div class="chip" data-cat="Famiglie & Bambini">Famiglie & Bambini</div>
    <div class="chip" data-cat="Sport">Sport</div>
    <div class="chip" data-cat="Nightlife">Nightlife</div>
    <div class="chip" data-cat="Cultura/Spettacolo">Cultura/Spettacolo</div>
    <div class="chip" data-cat="Mercatini">Mercatini</div>
  </div>

  <div id="resultCount" class="result-count">—</div>

  <div id="map" class="map"></div>

  <div class="cta-row">
    <a class="cta pubblica" href="pubblica-evento.html">Pubblica evento</a>
    <a class="cta lavoro" href="lavora-con-noi.html">Lavora con noi</a>
  </div>
</main>

<!-- Modal calendario -->
<div id="dateModal" class="modal" style="display:none; align-items:center; justify-content:center;">
  <div>
    <h3 style="margin:0 0 8px">Seleziona una data</h3>
    <input type="date" id="dateInput">
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
      <button id="dateCancel" class="btn secondary" type="button">Annulla</button>
      <button id="dateOk" class="btn primary" type="button">Conferma</button>
    </div>
  </div>
</div>

<script src="assets/app.js" defer></script>
<script>
// Fallback: se per qualche motivo app.js non inizializza il modal, attivo qui.
(function(){
  var selBtn = document.getElementById('selData');
  var modal = document.getElementById('dateModal');
  var dateInput = document.getElementById('dateInput');
  var ok = document.getElementById('dateOk');
  var cancel = document.getElementById('dateCancel');
  var badge = document.querySelector('#selData .date-badge');
  function openM(){ modal.classList.add('open'); modal.style.display='flex'; document.body.style.overflow='hidden'; dateInput.value=''; dateInput.focus(); }
  function closeM(){ modal.classList.remove('open'); modal.style.display='none'; document.body.style.overflow='auto'; }
  if(selBtn && !selBtn.dataset.patch){ selBtn.dataset.patch='1'; selBtn.addEventListener('click', function(e){ e.preventDefault(); openM();}); }
  if(cancel && !cancel.dataset.patch){ cancel.dataset.patch='1'; cancel.addEventListener('click', function(){ closeM();}); }
  if(ok && !ok.dataset.patch){ ok.dataset.patch='1'; ok.addEventListener('click', function(){ if(dateInput.value){ var d = new Date(dateInput.value); if(badge){ badge.textContent = d.toLocaleDateString('it-IT'); badge.style.display='inline-block'; } } closeM(); }); }
  if(modal && !modal.dataset.patch){ modal.dataset.patch='1'; modal.addEventListener('click', function(e){ if(e.target===modal) closeM(); }); }
})();
</script>
</body>
</html>
